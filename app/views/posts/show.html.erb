<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<%= link_to user_path(@post.user) do %>
<%= image_tag @post.user.get_profile_image %>
<% end %>
<%= @post.user.name %>




<h2><%= @post.title %></h2>

<div class="slider_container">
<div class="slider">

<% @post.animalpics.each do |animalPics| %>
<%= image_tag animalPics, size: '300x200' %>
<% end %>
</div>
</div>



<p><%= @post.text %></p>
<% @post_tags.each do |tag| %>
<%= link_to tag.name,search_tag_path(post_tag_id: tag.id) %>
<% end %>


<% if @post.user == current_user %>
<%= link_to "投稿削除", post_path(@post), method: :delete %>
<%= link_to "編集", edit_post_path(@post) %>
<% end %>


<% if @post.favorited_by?(current_user) %>
 <%= link_to post_favorites_path(@post), method: :delete do %>
 <p>♥<%= @post.favorites.count %>いいね</p>
 <% end %>


<% else %>

 <%= link_to post_favorites_path(@post), method: :post do %>
 <p>♡<%= @post.favorites.count %>いいね</p>
 <% end %>


<% end %>



<h2>コメント</h2>
<% @comments.each do |comment| %>
 <%= image_tag comment.user.get_profile_image %>
 <%= comment.user.name %>
 <%= comment.comment_content %>
 <% if current_user.admin? %>
 <%= link_to "削除", post_comment_path(@post, comment), method: :delete %>
 <% end %>
<% end %>

<%= form_with(model:[@post, @comment], method: :post) do |f| %>
<%= f.text_area :comment_content %>
<%= f.hidden_field :post_id, value: @post %>
<%= f.submit 'コメントする' %>
<% end %>

